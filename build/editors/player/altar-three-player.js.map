{"version":3,"file":"altar-three-player.js","sourceRoot":"","sources":["../../../src/editors/player/altar-three-player.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAqC,KAAK,EAAE,aAAa,EAAE,MAAM,OAAO,CAAC;AAEhF,MAAM,OAAgB,gBAAiE,SAAQ,WAAsD;IAQxI,KAAK,CAAC,YAAY,CAAC,kBAA0C;QAClE,KAAK,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;QAEvC,MAAM,EAAE,GAAG,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,CAAC;QAChC,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,aAAa,CAAC,EAAC,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC;QACjE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAA;QAE1D,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;QACvB,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAES,aAAa,CAAC,GAAQ;QAC5B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACxB,CAAC;IAES,YAAY;QAClB,qBAAqB,CAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAE,CAAC;QACtD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAE,CAAC;IACpD,CAAC;CACJ","sourcesContent":["import { PropertyValueMap } from \"lit\";\r\nimport { AltarPlayer } from \"./altar-player\";\r\nimport { Camera, EventDispatcher, Renderer, Scene, WebGLRenderer } from \"three\";\r\n\r\nexport abstract class AltarThreePlayer<CONTROLS extends EventDispatcher, COMMENT_TYPE> extends AltarPlayer<HTMLCanvasElement, CONTROLS, COMMENT_TYPE> {\r\n\r\n    protected scene!: Scene;\r\n    protected renderer!: Renderer;\r\n    protected camera!: Camera;\r\n\r\n    protected abstract initThree(): void;\r\n\r\n    override async firstUpdated(_changedProperties: PropertyValueMap<this>): Promise<void> {\r\n        super.firstUpdated(_changedProperties);\r\n\r\n        const el = (await this.element);\r\n        this.scene = new Scene();\r\n        this.renderer = new WebGLRenderer({canvas: el, antialias: true});\r\n        this.renderer.setSize(this.clientWidth, this.clientHeight)\r\n\r\n        await this.initThree();\r\n        this.animateThree();\r\n    }\r\n\r\n    protected loadRessource(obj: any ) {\r\n        this.scene.add(obj);\r\n    }\r\n\r\n    protected animateThree() {\r\n        requestAnimationFrame( this.animateThree.bind(this) );\r\n        this.renderer.render( this.scene, this.camera );\r\n    }\r\n}\r\n\r\n"]}